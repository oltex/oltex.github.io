---
title: "디파인(#Define)"
categories:
  - cpp
tags:
  - tag
---

### #define 지시문
```cpp
#define 식별자 토큰열
```

### 설명
#define의 사전적 의미는 정의하다라는 뜻을 가진다.<br>
선행처리 지시문라고 불리며 전처리 지시문을 사용하여 구현한다.<br>
컴파일 타임 전, 전처리 과정에서 해당하는 식별자를 만나면 토큰열로 변환시킵니다.

---
아래 코드의 PI에 해당하는 부분을 3.14f로 치환해 버립니다.<br>
이는 매크로 상수라고 불리는 define 지시문에 해당합니다.
```cpp
#define PI 3.14f

int main(int argc, char* argv[]) {
	float fPi = PI;
	std::cout << fPi << std::endl;
	return 0;
}
//결과
3.14
```

다른 define 지시문으로는 매크로 함수라는 것 입니다.
```cpp
#define SQUARE(x) x * x
#define PRINT(y) std::cout << y << std::endl;

int main(int argc, char* argv[]) {
	int iSquare = 3;
	int iResult = SQUARE(iSquare);
	PRINT(iResult);
	return 0;
}
```

### 주의
#define을 사용해야 한느 경우가 오면, const, enum, inline을 사용하는 편이 좋습니다.<br>
가급적 전처리기 보다 컴파일러를 더 가까이 하는게 낫습니다.
```cpp
#define ASPECT_RATIO 1.653
```
다음과 같은 define을 사용한다 했을 때<br>
컴파일러에게는 ASPECT_RATIO라는 가호식 이름은 보이지 않습니다.<br>
그결과 컴파일 에러가 발생하게 되면 1.653이라는 숫자만 보이게 됩니다.<br>
행여 ASPECT_RATIO 전처리문을 본인이 작성한 것이 아니라면<br>
디버깅에 꽤 곤란함을 겪을수 있습니다.<br>
문제의 해결법은 매크로 대신 상수를 쓰는 것입니다.
```cpp
const double AspectRatio = 1.653;
```
이는 상수 타입의 데이터이기 떄문에 당연히 컴파일러의 눈에 보입니다.<br>
이를 통해 컴파일 에러시의 대처를 좀더 효과적으로 진행할 수 있게됩니다.

클래스 상수를 정의 하는 경우, 즉 상수의 유효범위를 클래스 내로 한정하고자 할 때는<br>
정적(static) 맴버로 만들어야 합니다.
```cpp
class GamePlayer {
private:
	static const int NumTurns = 5;
	int scores[NumTurns];
};
```
정적(static) 맴버가 아니면 클래스가 생성되기 전까지 존재하지 않는 변수이므로
상수로서의 조건이 충족되지 않습니다. 단지 변하지않는 int형 변수일 뿐입니다.
